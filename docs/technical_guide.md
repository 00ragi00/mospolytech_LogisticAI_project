# –°–æ–∑–¥–∞–Ω–∏–µ Telegram Math Bot: –¢–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –¥–ª—è –Ω–æ–≤–∏—á–∫–æ–≤

–≠—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç –æ–ø–∏—Å—ã–≤–∞–µ—Ç —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Å–æ–∑–¥–∞–Ω–∏—é MathBot ‚Äî Telegram-–±–æ—Ç–∞, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–º–æ–∂–µ—Ç –≤–∞–º —Ä–µ—à–∞—Ç—å –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –∑–∞–¥–∞—á–∏ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –Ω–µ–π—Ä–æ–Ω–Ω–æ–π —Å–µ—Ç–∏ Qwen2.5-VL 7B Instruct. –≠—Ç–æ—Ç –±–æ—Ç —É–º–µ–µ—Ç —Ä–µ—à–∞—Ç—å —Ç–µ–∫—Å—Ç–æ–≤—ã–µ —É—Ä–∞–≤–Ω–µ–Ω–∏—è, –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ —Å –∑–∞–¥–∞—á–∞–º–∏, –∞ —Ç–∞–∫–∂–µ –æ–±—É—á–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —á–µ—Ä–µ–∑ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ –ø—Ä–∏–º–µ—Ä—ã. –ú—ã —Å–æ–∑–¥–∞–¥–∏–º –ø—Ä–æ–µ–∫—Ç —Å –Ω—É–ª—è, –æ–±—ä—è—Å–Ω—è—è –∫–∞–∂–¥—ã–π —à–∞–≥ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –ø–æ–¥—Ä–æ–±–Ω–æ –¥–ª—è –Ω–æ–≤–∏—á–∫–æ–≤. –¢–∞–∫–∂–µ –¥–æ–±–∞–≤–∏–º —Å—Ö–µ–º—ã –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–º–æ–≥—É—Ç –ø–æ–Ω—è—Ç—å –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É –∏ –ø—Ä–æ—Ü–µ—Å—Å—ã.

---

## –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

1. [–ß—Ç–æ –≤–∞–º –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è](#—á—Ç–æ-–≤–∞–º-–ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è)
2. [–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ–≥–æ –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è](#—É—Å—Ç–∞–Ω–æ–≤–∫–∞-–ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ–≥–æ-–æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è)
3. [–°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞](#—Å–æ–∑–¥–∞–Ω–∏–µ-–ø—Ä–æ–µ–∫—Ç–∞)
4. [–ù–∞–ø–∏—Å–∞–Ω–∏–µ –∫–æ–¥–∞ MathBot](#–Ω–∞–ø–∏—Å–∞–Ω–∏–µ-–∫–æ–¥–∞-mathbot)
5. [–ù–∞—Å—Ç—Ä–æ–π–∫–∞ API –∏ —Ç–æ–∫–µ–Ω–æ–≤](#–Ω–∞—Å—Ç—Ä–æ–π–∫–∞-api-–∏-—Ç–æ–∫–µ–Ω–æ–≤)
6. [–ó–∞–ø—É—Å–∫ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –±–æ—Ç–∞](#–∑–∞–ø—É—Å–∫-–∏-—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ-–±–æ—Ç–∞)
7. [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏ —Å—Ö–µ–º—ã](#–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞-–∏-—Å—Ö–µ–º—ã)
8. [–ß—Ç–æ –¥–µ–ª–∞—Ç—å, –µ—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç](#—á—Ç–æ-–¥–µ–ª–∞—Ç—å-–µ—Å–ª–∏-—á—Ç–æ-—Ç–æ-–Ω–µ-—Ä–∞–±–æ—Ç–∞–µ—Ç)
9. [–ö–∞–∫ —É–ª—É—á—à–∏—Ç—å –±–æ—Ç–∞](#–∫–∞–∫-—É–ª—É—á—à–∏—Ç—å-–±–æ—Ç–∞)
10. [–ó–∞–∫–ª—é—á–µ–Ω–∏–µ](#–∑–∞–∫–ª—é—á–µ–Ω–∏–µ)

---

## –ß—Ç–æ –≤–∞–º –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è

–ü—Ä–µ–∂–¥–µ —á–µ–º –Ω–∞—á–∞—Ç—å, —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É –≤–∞—Å –µ—Å—Ç—å —Å–ª–µ–¥—É—é—â–µ–µ:

- –ö–æ–º–ø—å—é—Ç–µ—Ä —Å –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º–æ–π: Windows, macOS –∏–ª–∏ Linux.
- –ò–Ω—Ç–µ—Ä–Ω–µ—Ç: –î–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –ø—Ä–æ–≥—Ä–∞–º–º –∏ —Ä–∞–±–æ—Ç—ã —Å API.
- –ê–∫–∫–∞—É–Ω—Ç –≤ Telegram: –ß—Ç–æ–±—ã —Å–æ–∑–¥–∞—Ç—å –±–æ—Ç–∞.
- –¢–µ–∫—Å—Ç–æ–≤—ã–π —Ä–µ–¥–∞–∫—Ç–æ—Ä: –ù–∞–ø—Ä–∏–º–µ—Ä, Visual Studio Code (–±–µ—Å–ø–ª–∞—Ç–Ω—ã–π, —Å–∫–∞—á–∞–π—Ç–µ [–∑–¥–µ—Å—å](https://code.visualstudio.com/)) –∏–ª–∏ –ª—é–±–æ–π –¥—Ä—É–≥–æ–π, –Ω–∞–ø—Ä–∏–º–µ—Ä, –ë–ª–æ–∫–Ω–æ—Ç.
- –ë–∞–∑–æ–≤—ã–µ –Ω–∞–≤—ã–∫–∏ —Ä–∞–±–æ—Ç—ã —Å –∫–æ–º–ø—å—é—Ç–µ—Ä–æ–º: –£–º–µ–Ω–∏–µ –æ—Ç–∫—Ä—ã–≤–∞—Ç—å —Ç–µ—Ä–º–∏–Ω–∞–ª, —Å–æ–∑–¥–∞–≤–∞—Ç—å —Ñ–∞–π–ª—ã –∏ –ø–∞–ø–∫–∏.

---

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ–≥–æ –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è

### –®–∞–≥ 1: –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Python
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –ª–∏ Python. –û—Ç–∫—Ä–æ–π—Ç–µ —Ç–µ—Ä–º–∏–Ω–∞–ª (–Ω–∞ Windows ‚Äî cmd –∏–ª–∏ PowerShell, –Ω–∞ macOS/Linux ‚Äî —Ç–µ—Ä–º–∏–Ω–∞–ª) –∏ –≤–≤–µ–¥–∏—Ç–µ:
      python --version
   
   –ï—Å–ª–∏ Python –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –∏–ª–∏ –≤–µ—Ä—Å–∏—è –Ω–∏–∂–µ 3.9, —Å–∫–∞—á–∞–π—Ç–µ –µ–≥–æ —Å [–æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–≥–æ —Å–∞–π—Ç–∞](https://www.python.org/downloads/). –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º –≤–µ—Ä—Å–∏—é 3.11.
2. –í–æ –≤—Ä–µ–º—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –æ—Ç–º–µ—Ç—å—Ç–µ –≥–∞–ª–æ—á–∫—É "Add Python to PATH" (–¥–æ–±–∞–≤–∏—Ç—å Python –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è), —á—Ç–æ–±—ã –∫–æ–º–∞–Ω–¥—ã python –∏ pip —Ä–∞–±–æ—Ç–∞–ª–∏ –∏–∑ —Ç–µ—Ä–º–∏–Ω–∞–ª–∞.

3. –ü–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –≤–µ—Ä—Å–∏—é Python –∏ pip (–∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –±–∏–±–ª–∏–æ—Ç–µ–∫):
      python --version
   pip --version
   

### –®–∞–≥ 2: –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ
–í–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ ‚Äî —ç—Ç–æ –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–∞—è "–ø–µ—Å–æ—á–Ω–∏—Ü–∞", –≥–¥–µ –º—ã –±—É–¥–µ–º —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –¥–ª—è –Ω–∞—à–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞, —á—Ç–æ–±—ã –æ–Ω–∏ –Ω–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤–∞–ª–∏ —Å –¥—Ä—É–≥–∏–º–∏ –ø—Ä–æ–µ–∫—Ç–∞–º–∏.

1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ virtualenv, –µ—Å–ª–∏ –µ–≥–æ –Ω–µ—Ç:
      pip install virtualenv
   
2. –°–æ–∑–¥–∞–π—Ç–µ –ø–∞–ø–∫—É –¥–ª—è –ø—Ä–æ–µ–∫—Ç–∞:
      mkdir MathBotProject
   cd MathBotProject
   
   - mkdir MathBotProject —Å–æ–∑–¥–∞–µ—Ç –ø–∞–ø–∫—É —Å –Ω–∞–∑–≤–∞–Ω–∏–µ–º MathBotProject.
   - cd MathBotProject –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –≤ —ç—Ç—É –ø–∞–ø–∫—É.

3. –°–æ–∑–¥–∞–π—Ç–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ:
      virtualenv venv
   
   –≠—Ç–æ —Å–æ–∑–¥–∞—Å—Ç –ø–∞–ø–∫—É venv –≤–Ω—É—Ç—Ä–∏ MathBotProject.

4. –ê–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ:
   - –ù–∞ Windows:
          venv\Scripts\activate
     
   - –ù–∞ macOS/Linux:
          source venv/bin/activate
     
   –ü–æ—Å–ª–µ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ –≤ –Ω–∞—á–∞–ª–µ —Å—Ç—Ä–æ–∫–∏ —Ç–µ—Ä–º–∏–Ω–∞–ª–∞ –ø–æ—è–≤–∏—Ç—Å—è (venv) ‚Äî —ç—Ç–æ –∑–Ω–∞—á–∏—Ç, —á—Ç–æ –≤—ã –Ω–∞—Ö–æ–¥–∏—Ç–µ—Å—å –≤ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–º –æ–∫—Ä—É–∂–µ–Ω–∏–∏.

### –®–∞–≥ 3: –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏
–¢–µ–ø–µ—Ä—å —É—Å—Ç–∞–Ω–æ–≤–∏–º –±–∏–±–ª–∏–æ—Ç–µ–∫–∏, –∫–æ—Ç–æ—Ä—ã–µ –Ω—É–∂–Ω—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã –±–æ—Ç–∞. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–æ (–≤–∏–¥–∏—Ç–µ (venv) –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ), –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:
pip install aiogram aiohttp python-dotenv
- aiogram ‚Äî –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å Telegram API (—Å–æ–∑–¥–∞–Ω–∏–µ –±–æ—Ç–∞).
- aiohttp ‚Äî –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ API –Ω–µ–π—Ä–æ–Ω–Ω–æ–π —Å–µ—Ç–∏.
- python-dotenv ‚Äî –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Ñ–∞–π–ª–æ–º .env, –≥–¥–µ –±—É–¥—É—Ç —Ö—Ä–∞–Ω–∏—Ç—å—Å—è —Å–µ–∫—Ä–µ—Ç–Ω—ã–µ –∫–ª—é—á–∏.

---

## –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞

### –®–∞–≥ 1: –°–æ–∑–¥–∞–π—Ç–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—É –ø—Ä–æ–µ–∫—Ç–∞
–í–Ω—É—Ç—Ä–∏ –ø–∞–ø–∫–∏ MathBotProject —Å–æ–∑–¥–∞–π—Ç–µ —Å–ª–µ–¥—É—é—â—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É:

MathBotProject/<br>
‚îÇ<br>
‚îú‚îÄ‚îÄ venv/              **–í–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ (—É–∂–µ —Å–æ–∑–¥–∞–Ω–æ)**<br>
‚îú‚îÄ‚îÄ math.py            **–§–∞–π–ª —Å –∫–æ–¥–æ–º –±–æ—Ç–∞**<br>
‚îî‚îÄ‚îÄ .env               **–§–∞–π–ª —Å —Å–µ–∫—Ä–µ—Ç–Ω—ã–º–∏ –∫–ª—é—á–∞–º–∏**<br>

1. –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª math.py:
   - –ï—Å–ª–∏ –≤—ã –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ Visual Studio Code, –æ—Ç–∫—Ä–æ–π—Ç–µ –ø–∞–ø–∫—É MathBotProject –≤ —Ä–µ–¥–∞–∫—Ç–æ—Ä–µ, –Ω–∞–∂–º–∏—Ç–µ –ø—Ä–∞–≤–æ–π –∫–Ω–æ–ø–∫–æ–π –º—ã—à–∏ –≤ –æ–±–æ–∑—Ä–µ–≤–∞—Ç–µ–ª–µ —Ñ–∞–π–ª–æ–≤ –∏ –≤—ã–±–µ—Ä–∏—Ç–µ "New File" ‚Üí –Ω–∞–∑–æ–≤–∏—Ç–µ –µ–≥–æ math.py.
   - –ò–ª–∏ —Å–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª —á–µ—Ä–µ–∑ —Ç–µ—Ä–º–∏–Ω–∞–ª:
          touch math.py  # –ù–∞ macOS/Linux
     echo > math.py  # –ù–∞ Windows
     

2. –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª .env —Ç–∞–∫–∏–º –∂–µ –æ–±—Ä–∞–∑–æ–º:
      touch .env  # –ù–∞ macOS/Linux
   echo > .env  # –ù–∞ Windows
   

### –®–∞–≥ 2: –ü–æ–ª—É—á–∏—Ç–µ Telegram Bot Token
1. –û—Ç–∫—Ä–æ–π—Ç–µ Telegram –∏ –Ω–∞–π–¥–∏—Ç–µ –±–æ—Ç–∞ @BotFather (–≤–≤–µ–¥–∏—Ç–µ –≤ –ø–æ–∏—Å–∫–µ @BotFather).
2. –ù–∞–ø–∏—à–∏—Ç–µ /start, –∑–∞—Ç–µ–º /newbot.
3. –°–ª–µ–¥—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º:
   - –í–≤–µ–¥–∏—Ç–µ –∏–º—è –±–æ—Ç–∞, –Ω–∞–ø—Ä–∏–º–µ—Ä, MyMathBot.
   - –í–≤–µ–¥–∏—Ç–µ username –±–æ—Ç–∞, –∑–∞–∫–∞–Ω—á–∏–≤–∞—é—â–∏–π—Å—è –Ω–∞ Bot, –Ω–∞–ø—Ä–∏–º–µ—Ä, MyMathBot123Bot.
4. –ü–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è BotFather –¥–∞—Å—Ç –≤–∞–º —Ç–æ–∫–µ–Ω, –Ω–∞–ø—Ä–∏–º–µ—Ä:
   
   7227343484:AAFf72XqB8VRAs1JAH-kTcSZtvsvQZpi8XI
   
   –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —ç—Ç–æ—Ç —Ç–æ–∫–µ–Ω, –æ–Ω –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è –ø–æ–∑–∂–µ.

### –®–∞–≥ 3: –ü–æ–ª—É—á–∏—Ç–µ OpenRouter API –∫–ª—é—á
1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ —Å–∞–π—Ç [openrouter.ai](https://openrouter.ai) –∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å.
2. –ü–æ—Å–ª–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –∑–∞–π–¥–∏—Ç–µ –≤ —Ä–∞–∑–¥–µ–ª "API Keys" (–ö–ª—é—á–∏ API).
3. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π –∫–ª—é—á –∏ —Å–∫–æ–ø–∏—Ä—É–π—Ç–µ –µ–≥–æ, –Ω–∞–ø—Ä–∏–º–µ—Ä:
   
   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
   
   –≠—Ç–æ—Ç –∫–ª—é—á –¥–∞—Å—Ç –¥–æ—Å—Ç—É–ø –∫ –º–æ–¥–µ–ª–∏ Qwen2.5-VL 7B Instruct.

### –®–∞–≥ 4: –ù–∞—Å—Ç—Ä–æ–π—Ç–µ —Ñ–∞–π–ª .env
–û—Ç–∫—Ä–æ–π—Ç–µ —Ñ–∞–π–ª .env –≤ —Ç–µ–∫—Å—Ç–æ–≤–æ–º —Ä–µ–¥–∞–∫—Ç–æ—Ä–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, Visual Studio Code –∏–ª–∏ –ë–ª–æ–∫–Ω–æ—Ç) –∏ –≤—Å—Ç–∞–≤—å—Ç–µ —Ç—É–¥–∞ —Å–ª–µ–¥—É—é—â–∏–µ —Å—Ç—Ä–æ–∫–∏:
TELEGRAM_BOT_TOKEN=–≤–∞—à_—Ç–æ–∫–µ–Ω_–æ—Ç_BotFather
OPENROUTER_API_KEY=–≤–∞—à_–∫–ª—é—á_–æ—Ç_OpenRouter
REFERER_URL=http://localhost
TITLE_NAME=Math Telegram Bot
- –ó–∞–º–µ–Ω–∏—Ç–µ –≤–∞—à_—Ç–æ–∫–µ–Ω_–æ—Ç_BotFather –Ω–∞ —Ç–æ–∫–µ–Ω, –ø–æ–ª—É—á–µ–Ω–Ω—ã–π –æ—Ç BotFather.
- –ó–∞–º–µ–Ω–∏—Ç–µ –≤–∞—à_–∫–ª—é—á_–æ—Ç_OpenRouter –Ω–∞ –∫–ª—é—á –æ—Ç OpenRouter.
- REFERER_URL –∏ TITLE_NAME –æ—Å—Ç–∞–≤—å—Ç–µ –∫–∞–∫ –µ—Å—Ç—å ‚Äî –æ–Ω–∏ –Ω—É–∂–Ω—ã –¥–ª—è API.

–°–æ—Ö—Ä–∞–Ω–∏—Ç–µ —Ñ–∞–π–ª .env.

---

## –ù–∞–ø–∏—Å–∞–Ω–∏–µ –∫–æ–¥–∞ MathBot

–¢–µ–ø–µ—Ä—å –º—ã —Å–æ–∑–¥–∞–¥–∏–º —Ñ–∞–π–ª math.py —Å –Ω—É–ª—è. –û—Ç–∫—Ä–æ–π—Ç–µ —Ñ–∞–π–ª math.py –≤ —Ç–µ–∫—Å—Ç–æ–≤–æ–º —Ä–µ–¥–∞–∫—Ç–æ—Ä–µ –∏ –¥–æ–±–∞–≤–ª—è–π—Ç–µ –∫–æ–¥ –ø–æ —á–∞—Å—Ç—è–º, —Å–ª–µ–¥—É—è –æ–±—ä—è—Å–Ω–µ–Ω–∏—è–º.

### –®–∞–≥ 1: –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º –±–∏–±–ª–∏–æ—Ç–µ–∫–∏
–ù–∞—á–Ω–µ–º —Å –∏–º–ø–æ—Ä—Ç–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö –±–∏–±–ª–∏–æ—Ç–µ–∫. –î–æ–±–∞–≤—å—Ç–µ –≤ –Ω–∞—á–∞–ª–æ —Ñ–∞–π–ª–∞ math.py:
import asyncio
import logging
import os
import json
import aiohttp
import random
from dotenv import load_dotenv
from aiogram import Bot, Dispatcher, types
from aiogram.filters import CommandStart, BaseFilter, Command
from aiogram.enums import ContentType
from aiogram.types import InlineKeyboardMarkup, InlineKeyboardButton, ReplyKeyboardMarkup, KeyboardButton
import re
import base64
–û–±—ä—è—Å–Ω–µ–Ω–∏–µ:
- asyncio ‚Äî –¥–ª—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è (–±–æ—Ç–∞ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –º–Ω–æ–≥–æ –∑–∞–ø—Ä–æ—Å–æ–≤ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ).
- logging ‚Äî –¥–ª—è –∑–∞–ø–∏—Å–∏ –ª–æ–≥–æ–≤ (—á—Ç–æ–±—ã –≤–∏–¥–µ—Ç—å –æ—à–∏–±–∫–∏).
- os –∏ json ‚Äî –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Ñ–∞–π–ª–∞–º–∏ –∏ –¥–∞–Ω–Ω—ã–º–∏.
- aiohttp ‚Äî –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ API.
- random ‚Äî –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Å–ª—É—á–∞–π–Ω—ã—Ö –ø—Ä–∏–º–µ—Ä–æ–≤.
- load_dotenv ‚Äî –¥–ª—è —á—Ç–µ–Ω–∏—è .env.
- aiogram ‚Äî –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è Telegram-–±–æ—Ç–∞.
- re ‚Äî –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Ä–µ–≥—É–ª—è—Ä–Ω—ã–º–∏ –≤—ã—Ä–∞–∂–µ–Ω–∏—è–º–∏ (–ø–æ–∏—Å–∫ –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Å–∏–º–≤–æ–ª–æ–≤).
- base64 ‚Äî –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π.

### –®–∞–≥ 2: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –∑–∞–≥—Ä—É–∑–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö
–î–æ–±–∞–≤—å—Ç–µ —Å–ª–µ–¥—É—é—â–∏–π –∫–æ–¥:
# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
logging.basicConfig(level=logging.INFO)

# –ó–∞–≥—Ä—É–∑–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
load_dotenv(override=True)
TELEGRAM_BOT_TOKEN = os.getenv("TELEGRAM_BOT_TOKEN")
OPENROUTER_API_KEY = os.getenv("OPENROUTER_API_KEY")

# –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –±–æ—Ç–∞ –∏ –¥–∏—Å–ø–µ—Ç—á–µ—Ä–∞
bot = Bot(token=TELEGRAM_BOT_TOKEN)
dp = Dispatcher()
–û–±—ä—è—Å–Ω–µ–Ω–∏–µ:
- logging.basicConfig(level=logging.INFO) ‚Äî –≤–∫–ª—é—á–∞–µ—Ç –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ, —á—Ç–æ–±—ã –≤–∏–¥–µ—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö.
- load_dotenv() ‚Äî –∑–∞–≥—Ä—É–∂–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑ .env.
- os.getenv() ‚Äî –ø–æ–ª—É—á–∞–µ—Ç —Ç–æ–∫–µ–Ω—ã –∏–∑ .env.
- Bot –∏ Dispatcher ‚Äî —Å–æ–∑–¥–∞—é—Ç –±–æ—Ç–∞ –∏ –¥–∏—Å–ø–µ—Ç—á–µ—Ä –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π.

### –®–∞–≥ 3: –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ä–µ–≥—É–ª—è—Ä–Ω–æ–≥–æ –≤—ã—Ä–∞–∂–µ–Ω–∏—è –¥–ª—è –º–∞—Ç–µ–º–∞—Ç–∏–∫–∏
–î–æ–±–∞–≤—å—Ç–µ –∫–æ–¥ –¥–ª—è –ø–æ–∏—Å–∫–∞ –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö –≤—ã—Ä–∞–∂–µ–Ω–∏–π:
# –†–µ–≥—É–ª—è—Ä–Ω–æ–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ –¥–ª—è –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö –≤—ã—Ä–∞–∂–µ–Ω–∏–π
MATH_REGEX = re.compile(r'[\d+\-*/=^()\[\]{}‚àöœÄ‚àû‚àë‚à´‚àÆ‚àù‚â†‚â§‚â•‚âà]', re.UNICODE)
–û–±—ä—è—Å–Ω–µ–Ω–∏–µ:
- MATH_REGEX –∏—â–µ—Ç –≤ —Ç–µ–∫—Å—Ç–µ —Å–∏–º–≤–æ–ª—ã, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç –±—ã—Ç—å —á–∞—Å—Ç—å—é –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –≤—ã—Ä–∞–∂–µ–Ω–∏—è, –Ω–∞–ø—Ä–∏–º–µ—Ä, —á–∏—Å–ª–∞, –∑–Ω–∞–∫–∏ +, -, –∏–ª–∏ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ —Å–∏–º–≤–æ–ª—ã –≤—Ä–æ–¥–µ ‚àö.

### –®–∞–≥ 4: –§–∏–ª—å—Ç—Ä –¥–ª—è —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π
–°–æ–∑–¥–∞–¥–∏–º —Ñ–∏–ª—å—Ç—Ä, —á—Ç–æ–±—ã –±–æ—Ç –ø–æ–Ω–∏–º–∞–ª, —á—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–ø—Ä–∞–≤–∏–ª —Ñ–æ—Ç–æ:
# –§–∏–ª—å—Ç—Ä –¥–ª—è —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π
class PhotoFilter(BaseFilter):
    async def __call__(self, message: types.Message) -> bool:
        return message.content_type == ContentType.PHOTO
–û–±—ä—è—Å–Ω–µ–Ω–∏–µ:
- PhotoFilter –ø—Ä–æ–≤–µ—Ä—è–µ—Ç, —è–≤–ª—è–µ—Ç—Å—è –ª–∏ —Å–æ–æ–±—â–µ–Ω–∏–µ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–µ–π, —á—Ç–æ–±—ã –±–æ—Ç –º–æ–≥ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –æ—Ç–¥–µ–ª—å–Ω–æ.

### –®–∞–≥ 5: –¢–µ–º—ã –¥–ª—è –æ–±—É—á–µ–Ω–∏—è
–û–ø—Ä–µ–¥–µ–ª–∏–º —Ç–µ–º—ã –¥–ª—è —Ä–µ–∂–∏–º–∞ –æ–±—É—á–µ–Ω–∏—è:
# –¢–µ–º—ã –¥–ª—è –æ–±—É—á–µ–Ω–∏—è
TOPICS = {
    "linear": "–†–µ—à–µ–Ω–∏–µ –ª–∏–Ω–µ–π–Ω—ã—Ö —É—Ä–∞–≤–Ω–µ–Ω–∏–π",
    "quadratic": "–†–µ—à–µ–Ω–∏–µ –∫–≤–∞–¥—Ä–∞—Ç–Ω—ã—Ö —É—Ä–∞–≤–Ω–µ–Ω–∏–π",
    "cubic": "–†–µ—à–µ–Ω–∏–µ —É—Ä–∞–≤–Ω–µ–Ω–∏–π 3-–π —Å—Ç–µ–ø–µ–Ω–∏",
    "integrals": "–†–µ—à–µ–Ω–∏–µ –∏–Ω—Ç–µ–≥—Ä–∞–ª–æ–≤",
    "fractions": "–û–ø–µ—Ä–∞—Ü–∏–∏ —Å –¥—Ä–æ–±—è–º–∏",
    "exponential": "–†–µ—à–µ–Ω–∏–µ —ç–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω—ã—Ö —É—Ä–∞–≤–Ω–µ–Ω–∏–π",
    "logarithms": "–†–µ—à–µ–Ω–∏–µ –ª–æ–≥–∞—Ä–∏—Ñ–º–∏—á–µ—Å–∫–∏—Ö —É—Ä–∞–≤–Ω–µ–Ω–∏–π"
}

# –•—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
USER_STATES = {}
–û–±—ä—è—Å–Ω–µ–Ω–∏–µ:
- TOPICS ‚Äî —Å–ª–æ–≤–∞—Ä—å —Å —Ç–µ–º–∞–º–∏, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –≤—ã–±—Ä–∞—Ç—å –≤ —Ä–µ–∂–∏–º–µ –æ–±—É—á–µ–Ω–∏—è.
- USER_STATES ‚Äî —Å–ª–æ–≤–∞—Ä—å –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —Ç–µ–∫—É—â–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∫–∞–∫–∏–µ –ø—Ä–∏–º–µ—Ä—ã –æ–Ω —Ä–µ—à–∞–µ—Ç).

### –®–∞–≥ 6: –£–¥–∞–ª–µ–Ω–∏–µ LaTeX-—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
–î–æ–±–∞–≤–∏–º —Ñ—É–Ω–∫—Ü–∏—é –¥–ª—è –æ—á–∏—Å—Ç–∫–∏ –æ—Ç–≤–µ—Ç–∞ –æ—Ç LaTeX-—Å–∏–º–≤–æ–ª–æ–≤:
def clean_latex(text: str) -> str:
    """–£–¥–∞–ª—è–µ—Ç LaTeX-—Å–∏–º–≤–æ–ª—ã –∏ —É–ø—Ä–æ—â–∞–µ—Ç –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –≤—ã—Ä–∞–∂–µ–Ω–∏—è."""
    text = re.sub(r'\\[\(\[]|\\[\)\]]', '', text)
    text = re.sub(r'\^{([^}]+)}', r'^\1', text)
    text = re.sub(r'\\frac{([^}]+)}{([^}]+)}', r'\1/\2', text)
    text = re.sub(r'\\sqrt{([^}]+)}', r'sqrt(\1)', text)
    text = text.replace(r'\cdot', '*').replace(r'\times', '*')
    text = text.replace('\\', '')
    return text.strip()
–û–±—ä—è—Å–Ω–µ–Ω–∏–µ:
- –≠—Ç–∞ —Ñ—É–Ω–∫—Ü–∏—è —É–±–∏—Ä–∞–µ—Ç LaTeX-—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, \frac{a}{b} –ø—Ä–µ–≤—Ä–∞—â–∞–µ—Ç—Å—è –≤ a/b), —á—Ç–æ–±—ã –æ—Ç–≤–µ—Ç—ã –±—ã–ª–∏ –ø—Ä–æ—â–µ –¥–ª—è —á—Ç–µ–Ω–∏—è.

### –®–∞–≥ 7: –ó–∞–ø—Ä–æ—Å –∫ API –Ω–µ–π—Ä–æ–Ω–Ω–æ–π —Å–µ—Ç–∏
–î–æ–±–∞–≤–∏–º —Ñ—É–Ω–∫—Ü–∏—é –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ OpenRouter API:
async def invoke_llm_api(user_content, image_data=None) -> str:
    """–û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∑–∞–ø—Ä–æ—Å –∫ OpenRouter API –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ—Ç–≤–µ—Ç."""
    if not OPENROUTER_API_KEY:
        return "–û—à–∏–±–∫–∞: –¢–æ–∫–µ–Ω OPENROUTER_API_KEY –Ω–µ –Ω–∞–π–¥–µ–Ω –≤ .env"

    headers = {
        "Authorization": f"Bearer {OPENROUTER_API_KEY}",
        "Content-Type": "application/json",
        "HTTP-Referer": os.getenv("REFERER_URL", "http://localhost"),
        "X-Title": os.getenv("TITLE_NAME", "Math Telegram Bot")
    }

    # –°–∏—Å—Ç–µ–º–Ω—ã–π –ø—Ä–æ–º–ø—Ç –¥–ª—è —Ñ–æ—Ä–º–∞—Ç–∞ –æ—Ç–≤–µ—Ç–∞
    system_prompt = """–¢—ã —Ä–µ—à–∞–µ—à—å —Ç–æ–ª—å–∫–æ –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –∑–∞–¥–∞—á–∏.
    –§–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞: 
    –û—Ç–≤–µ—Ç: [—á–∏—Å–ª–æ –∏–ª–∏ —á–∏—Å–ª–∞, –Ω–∞–ø—Ä–∏–º–µ—Ä, 2 –∏–ª–∏ 1.1]
    –†–µ—à–µ–Ω–∏–µ: [–ø–æ—à–∞–≥–æ–≤–æ–µ –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ]
    –û–±—â–∏–π –æ—Ç–≤–µ—Ç (–û—Ç–≤–µ—Ç + –†–µ—à–µ–Ω–∏–µ) –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∫–æ—Ä–æ—á–µ 100 —Å–∏–º–≤–æ–ª–æ–≤.
    –ù–µ –∏—Å–ø–æ–ª—å–∑—É–π LaTeX (–Ω–∞–ø—Ä–∏–º–µ—Ä, \(, \), x^{2}). 
    –ü–∏—à–∏ –≤ —Ç–µ–∫—Å—Ç–æ–≤–æ–º —Ñ–æ—Ä–º–∞—Ç–µ (x^2, sqrt(x), a/b)."""

    messages = [
        {"role": "system", "content": system_prompt},
        {"role": "user", "content": user_content}
    ]

    if image_data:
        messages[1]["content"] = [
            {"type": "text", "text": user_content},
            {"type": "image_url", "image_url": f"data:image/jpeg;base64,{image_data}"}
        ]

    body = {
        "model": "qwen/qwen-2-vl-7b-instruct",
        "messages": messages,
        "stream": False,
        "max_tokens": 512,
        "temperature": 0.7
    }
    
    try:
        async with aiohttp.ClientSession() as session:
            async with session.post("https://openrouter.ai/api/v1/chat/completions", headers=headers, json=body) as response:
                if response.status != 200:
                    error_text = await response.text()
                    logging.error(f"API request failed: {response.status}, {error_text}")
                    return f"–û—à–∏–±–∫–∞ API: {response.status}"
                response_data = await response.json()
                if response_data.get("choices") and response_data["choices"][0].get("message"):
                    response_text = response_data["choices"][0]["message"]["content"]
                    return clean_latex(response_text)
                return "–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å –æ—Ç–≤–µ—Ç."
    except Exception as e:
        logging.error(f"API error: {e}")
        return "–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ–±—Ä–∞—â–µ–Ω–∏–∏ –∫ API."
–û–±—ä—è—Å–Ω–µ–Ω–∏–µ:
- –≠—Ç–∞ —Ñ—É–Ω–∫—Ü–∏—è –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∑–∞–ø—Ä–æ—Å –∫ OpenRouter API —Å —Ç–µ–∫—Å—Ç–æ–º –∏–ª–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º.
- system_prompt —É–∫–∞–∑—ã–≤–∞–µ—Ç –º–æ–¥–µ–ª–∏, –∫–∞–∫ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞—Ç—å –æ—Ç–≤–µ—Ç (—Å–Ω–∞—á–∞–ª–∞ –æ—Ç–≤–µ—Ç, –ø–æ—Ç–æ–º —Ä–µ—à–µ–Ω–∏–µ, –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö 100 —Å–∏–º–≤–æ–ª–æ–≤).
- –ï—Å–ª–∏ –ø–µ—Ä–µ–¥–∞–Ω image_data, –∑–∞–ø—Ä–æ—Å –≤–∫–ª—é—á–∞–µ—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤ —Ñ–æ—Ä–º–∞—Ç–µ base64.
- –û—Ç–≤–µ—Ç –æ—á–∏—â–∞–µ—Ç—Å—è –æ—Ç LaTeX —á–µ—Ä–µ–∑ clean_latex.

### –®–∞–≥ 8: –ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
–î–æ–±–∞–≤–∏–º —Ñ—É–Ω–∫—Ü–∏—é –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –∏–∑ Telegram:
async def download_image(file_id: str) -> str:
    """–°–∫–∞—á–∏–≤–∞–µ—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏–∑ Telegram –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –µ–≥–æ –≤ —Ñ–æ—Ä–º–∞—Ç–µ base64."""
    file = await bot.get_file(file_id)
    file_url = f"https://api.telegram.org/file/bot{TELEGRAM_BOT_TOKEN}/{file.file_path}"
    async with aiohttp.ClientSession() as session:
        async with session.get(file_url) as response:
            if response.status == 200:
                image_data = await response.read()
                return base64.b64encode(image_data).decode("utf-8")
            logging.error(f"Failed to download image: {response.status}")
            return None
–û–±—ä—è—Å–Ω–µ–Ω–∏–µ:
- –§—É–Ω–∫—Ü–∏—è –ø–æ–ª—É—á–∞–µ—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø–æ –µ–≥–æ file_id, —Å–∫–∞—á–∏–≤–∞–µ—Ç –µ–≥–æ –∏ –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç –≤ base64 –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –≤ API.

### –®–∞–≥ 9: –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø—Ä–∏–º–µ—Ä–æ–≤ –¥–ª—è –æ–±—É—á–µ–Ω–∏—è
–î–æ–±–∞–≤–∏–º —Ñ—É–Ω–∫—Ü–∏—é –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –ø—Ä–∏–º–µ—Ä–æ–≤:

def generate_examples(topic: str) -> list:
    """–ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç 3 —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –ø—Ä–∏–º–µ—Ä–∞ –¥–ª—è –≤—ã–±—Ä–∞–Ω–Ω–æ–π —Ç–µ–º—ã —Å –≤–æ–∑—Ä–∞—Å—Ç–∞—é—â–µ–π —Å–ª–æ–∂–Ω–æ—Å—Ç—å—é."""
    examples = []
    answers = []
    
    if topic == "linear":
        for i in range(1, 4):
            a = random.randint(i, i * 2)  
            b = random.randint(-i * 5, i * 5)
            c = random.randint(-i * 5, i * 5)
            x = random.randint(-10, 10)  
            d = a * x + b - c  
            example = f"{a}x + {b} = {c} + {d}"
            examples.append(example)
            answers.append(str(x))
    
    elif topic == "quadratic":
        for i in range(1, 4):
            a = random.randint(1, i)
            x = random.randint(-5, 5)
            c = random.randint(-i * 5, i * 5)
            b = -2 * a * x 
            example = f"{a}x^2 + {b}x + {c} = 0"
            examples.append(example)
            answers.append(str(x))
    
    elif topic == "cubic":
        for i in range(1, 4):
            a = random.randint(1, i)
            x = random.randint(-3, 3)
            b = random.randint(-i * 3, i * 3)
            c = random.randint(-i * 5, i * 5)
            d = -a * x**3 - b * x**2 - c * x  
            example = f"{a}x^3 + {b}x^2 + {c}x + {d} = 0"
            examples.append(example)
            answers.append(str(x))
    
    elif topic == "integrals":
        for i in range(1, 4):
            a = random.randint(1, i)
            n = random.randint(1, i)  
            c = random.randint(-i, i)
            example = f"‚à´ ({a}x^{n} + {c}) dx"
            answers.append(f"{a/(n+1)}x^{n+1} + {c}x + C")
    
    elif topic == "fractions":
        for i in range(1, 4):
            a = random.randint(1, i * 2)
            b = random.randint(1, i * 2)
            c = random.randint(1, i * 2)
            d = random.randint(1, i * 2)
            ans = (a * d + b * c) / (b * d)  
            if ans.is_integer() or abs(ans - round(ans, 1)) < 0.01:
                example = f"({a}/{b}) + ({c}/{d})"
                examples.append(example)
                answers.append(str(round(ans, 1)))
    
    elif topic == "exponential":
        for i in range(1, 4):
            base = random.choice([2, 3, 4])
            x = random.randint(1, i)
            example = f"{base}^x = {base**x}"
            examples.append(example)
            answers.append(str(x))
    
    elif topic == "logarithms":
        for i in range(1, 4):
            base = random.choice([2, 3, 10])
            x = random.randint(1, i)
            example = f"log_{base}({base**x}) = ?"
            examples.append(example)
            answers.append(str(x))
    
    return [{"example": ex, "answer": ans} for ex, ans in zip(examples, answers)]
–û–±—ä—è—Å–Ω–µ–Ω–∏–µ:
- –§—É–Ω–∫—Ü–∏—è —Å–æ–∑–¥–∞–µ—Ç 3 –ø—Ä–∏–º–µ—Ä–∞ –¥–ª—è –∫–∞–∂–¥–æ–π —Ç–µ–º—ã.
- –°–ª–æ–∂–Ω–æ—Å—Ç—å –≤–æ–∑—Ä–∞—Å—Ç–∞–µ—Ç –∑–∞ —Å—á–µ—Ç —É–≤–µ–ª–∏—á–µ–Ω–∏—è –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç–æ–≤ –∏–ª–∏ —Å—Ç–µ–ø–µ–Ω–∏.
- –û—Ç–≤–µ—Ç—ã ‚Äî —Ü–µ–ª—ã–µ —á–∏—Å–ª–∞ –∏–ª–∏ –ø—Ä–æ—Å—Ç—ã–µ –¥–µ—Å—è—Ç–∏—á–Ω—ã–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, 1.1).

### –®–∞–≥ 10: –°–æ–∑–¥–∞–Ω–∏–µ –∫–ª–∞–≤–∏–∞—Ç—É—Ä
–î–æ–±–∞–≤–∏–º —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∫–ª–∞–≤–∏–∞—Ç—É—Ä:
def create_topics_keyboard() -> InlineKeyboardMarkup:
    """–°–æ–∑–¥–∞–µ—Ç –∏–Ω–ª–∞–π–Ω-–∫–ª–∞–≤–∏–∞—Ç—É—Ä—É —Å —Ç–µ–º–∞–º–∏ –¥–ª—è –æ–±—É—á–µ–Ω–∏—è."""
    keyboard = InlineKeyboardMarkup(inline_keyboard=[])
    for topic_id, topic_name in TOPICS.items():
        keyboard.inline_keyboard.append(
            [InlineKeyboardButton(text=topic_name, callback_data=f"topic_{topic_id}")]
        )
    return keyboard

def create_main_keyboard() -> ReplyKeyboardMarkup:
    """–°–æ–∑–¥–∞–µ—Ç –æ—Å–Ω–æ–≤–Ω—É—é –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É —Å –∫–Ω–æ–ø–∫–∞–º–∏ '–û–±—É—á–µ–Ω–∏–µ' –∏ '–†–µ—à–µ–Ω–∏–µ –ø—Ä–∏–º–µ—Ä–æ–≤'."""
    keyboard = ReplyKeyboardMarkup(
        keyboard=[
            [KeyboardButton(text="–û–±—É—á–µ–Ω–∏–µ"), KeyboardButton(text="–†–µ—à–µ–Ω–∏–µ –ø—Ä–∏–º–µ—Ä–æ–≤")]
        ],
        resize_keyboard=True,
        one_time_keyboard=False
    )
    return keyboard
–û–±—ä—è—Å–Ω–µ–Ω–∏–µ:
- create_topics_keyboard —Å–æ–∑–¥–∞–µ—Ç –∏–Ω–ª–∞–π–Ω-–∫–ª–∞–≤–∏–∞—Ç—É—Ä—É —Å —Ç–µ–º–∞–º–∏ (–ø–æ—è–≤–ª—è–µ—Ç—Å—è –ø—Ä–∏ –≤—ã–±–æ—Ä–µ "–û–±—É—á–µ–Ω–∏–µ").
- create_main_keyboard —Å–æ–∑–¥–∞–µ—Ç –æ—Å–Ω–æ–≤–Ω—É—é –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É —Å –¥–≤—É–º—è –∫–Ω–æ–ø–∫–∞–º–∏, –∫–æ—Ç–æ—Ä—ã–µ –≤—Å–µ–≥–¥–∞ –≤–∏–¥–Ω—ã –≤–Ω–∏–∑—É.

### –®–∞–≥ 11: –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–æ–º–∞–Ω–¥—ã /start
–î–æ–±–∞–≤–∏–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è –∫–æ–º–∞–Ω–¥—ã /start:
@dp.message(CommandStart())
async def send_welcome(message: types.Message):
    """–û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∫–æ–º–∞–Ω–¥—É /start."""
    keyboard = create_main_keyboard()
    await message.reply(
        "–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ MathBot - –≤–∞—à –ø–æ–º–æ—â–Ω–∏–∫ –≤ —Ä–µ—à–µ–Ω–∏–∏ –ø—Ä–∏–º–µ—Ä–æ–≤! "
        "–≠—Ç–æ—Ç –±–æ—Ç –ø–æ–º–æ–∂–µ—Ç –≤–∞–º –æ—Å–≤–æ–∏—Ç—å –º–∞—Ç–µ–º–∞—Ç–∏–∫—É, —Ä–µ—à–∏—Ç—å —É—Ä–∞–≤–Ω–µ–Ω–∏—è –∏ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–≤–æ–∏ –∑–Ω–∞–Ω–∏—è. "
        "–û—Ç–ø—Ä–∞–≤—å—Ç–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ, —Ñ–æ—Ç–æ –∏–ª–∏ –≤—ã–±–µ—Ä–∏—Ç–µ –¥–µ–π—Å—Ç–≤–∏–µ –Ω–∏–∂–µ:",
        reply_markup=keyboard
    )
–û–±—ä—è—Å–Ω–µ–Ω–∏–µ:
- –≠—Ç–æ—Ç –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ –∫–æ–º–∞–Ω–¥—É /start, –ø–æ–∫–∞–∑—ã–≤–∞—è –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –∏ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É.

### –®–∞–≥ 12: –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–Ω–æ–ø–∫–∏ "–û–±—É—á–µ–Ω–∏–µ"
–î–æ–±–∞–≤–∏–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è –∫–Ω–æ–ø–∫–∏ "–û–±—É—á–µ–Ω–∏–µ":
@dp.message(lambda message: message.text == "–û–±—É—á–µ–Ω–∏–µ")
async def learn_command(message: types.Message):
    """–û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∫–Ω–æ–ø–∫—É '–û–±—É—á–µ–Ω–∏–µ' –∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ç–µ–º—ã."""
    keyboard = create_topics_keyboard()
    await message.reply("–í—ã–±–µ—Ä–∏ —Ç–µ–º—É –¥–ª—è –æ–±—É—á–µ–Ω–∏—è:", reply_markup=keyboard)
–û–±—ä—è—Å–Ω–µ–Ω–∏–µ:
- –ö–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∏–º–∞–µ—Ç "–û–±—É—á–µ–Ω–∏–µ", –±–æ—Ç –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∏–Ω–ª–∞–π–Ω-–∫–ª–∞–≤–∏–∞—Ç—É—Ä—É —Å —Ç–µ–º–∞–º–∏.

### –®–∞–≥ 13: –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–Ω–æ–ø–∫–∏ "–†–µ—à–µ–Ω–∏–µ –ø—Ä–∏–º–µ—Ä–æ–≤"
–î–æ–±–∞–≤–∏–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è –∫–Ω–æ–ø–∫–∏ "–†–µ—à–µ–Ω–∏–µ –ø—Ä–∏–º–µ—Ä–æ–≤":
@dp.message(lambda message: message.text == "–†–µ—à–µ–Ω–∏–µ –ø—Ä–∏–º–µ—Ä–æ–≤")
async def solve_examples(message: types.Message):
    """–û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∫–Ω–æ–ø–∫—É '–†–µ—à–µ–Ω–∏–µ –ø—Ä–∏–º–µ—Ä–æ–≤'."""
    keyboard = create_main_keyboard()
    await message.reply(
        "–û—Ç–ø—Ä–∞–≤—å –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ –∏–ª–∏ —Ñ–æ—Ç–æ —Å –∑–∞–¥–∞—á–µ–π.",
        reply_markup=keyboard
    )
–û–±—ä—è—Å–Ω–µ–Ω–∏–µ:
- –ü—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ "–†–µ—à–µ–Ω–∏–µ –ø—Ä–∏–º–µ—Ä–æ–≤" –±–æ—Ç –ø—Ä–æ—Å–∏—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞–¥–∞—á—É.

### –®–∞–≥ 14: –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤—ã–±–æ—Ä–∞ —Ç–µ–º—ã
–î–æ–±–∞–≤–∏–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è –≤—ã–±–æ—Ä–∞ —Ç–µ–º—ã:
@dp.callback_query(lambda c: c.data.startswith("topic_"))
async def process_topic_selection(callback: types.CallbackQuery):
    """–û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –≤—ã–±–æ—Ä —Ç–µ–º—ã –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç 3 –ø—Ä–∏–º–µ—Ä–∞."""
    topic_id = callback.data.split("_")[1]
    if topic_id not in TOPICS:
        await callback.message.reply("–ù–µ–≤–µ—Ä–Ω–∞—è —Ç–µ–º–∞.")
        return

    examples = generate_examples(topic_id)
    USER_STATES[callback.from_user.id] = {"topic": topic_id, "examples": examples}
    
    message_text = f"–¢–µ–º–∞: {TOPICS[topic_id]}\n\n"
    for i, ex in enumerate(examples, 1):
        message_text += f"{i}) {ex['example']}\n"
    message_text += "\n–û—Ç–ø—Ä–∞–≤—å –æ—Ç–≤–µ—Ç—ã –≤ —Ñ–æ—Ä–º–∞—Ç–µ:\n1) –æ—Ç–≤–µ—Ç\n2) –æ—Ç–≤–µ—Ç\n..."

    keyboard = create_main_keyboard()
    await callback.message.reply(message_text, reply_markup=keyboard)
    await callback.answer()
–û–±—ä—è—Å–Ω–µ–Ω–∏–µ:
- –≠—Ç–æ—Ç –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç, –∫–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—ã–±–∏—Ä–∞–µ—Ç —Ç–µ–º—É.
- –ë–æ—Ç –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç 3 –ø—Ä–∏–º–µ—Ä–∞ –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –∏—Ö –≤ USER_STATES, —á—Ç–æ–±—ã –ø–æ—Ç–æ–º –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –æ—Ç–≤–µ—Ç—ã.

### –®–∞–≥ 15: –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π
–î–æ–±–∞–≤–∏–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π:
@dp.message(PhotoFilter())
async def handle_photo(message: types.Message):
    """–û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏—è —Å —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—è–º–∏."""
    processing_message = await message.reply("–û–±—Ä–∞–±–∞—Ç—ã–≤–∞—é —Ñ–æ—Ç–æ...")
    photo = message.photo[-1]
    image_base64 = await download_image(photo.file_id)

    if not image_base64:
        await bot.delete_message(chat_id=processing_message.chat.id, message_id=processing_message.message_id)
        await message.reply("–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–æ—Ç–æ.")
        return

    response_text = await invoke_llm_api("–†–µ—à–∏—Ç–µ –∑–∞–¥–∞—á—É –Ω–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–∏.", image_base64)
    await bot.delete_message(chat_id=processing_message.chat.id, message_id=processing_message.message_id)

    keyboard = create_main_keyboard()
    if response_text:
        for i in range(0, len(response_text), 4096):
            await message.reply(response_text[i:i+4096], reply_markup=keyboard)
    else:
        await message.reply("–ù–µ —É–¥–∞–ª–æ—Å—å –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å –∑–∞–¥–∞—á—É.", reply_markup=keyboard)
–û–±—ä—è—Å–Ω–µ–Ω–∏–µ:
- –≠—Ç–æ—Ç –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç, –µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–ø—Ä–∞–≤–∏–ª —Ñ–æ—Ç–æ.
- –ë–æ—Ç —Å–∫–∞—á–∏–≤–∞–µ—Ç —Ñ–æ—Ç–æ, –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –µ–≥–æ –≤ API –∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –æ—Ç–≤–µ—Ç.

### –®–∞–≥ 16: –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
–î–æ–±–∞–≤–∏–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π:
@dp.message()
async def handle_message(message: types.Message):
    """–û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –≤—Ö–æ–¥—è—â–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è."""
    user_id = message.from_user.id
    keyboard = create_main_keyboard()

    # –ü—Ä–æ–≤–µ—Ä–∫–∞, –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤ —Ä–µ–∂–∏–º–µ –æ–±—É—á–µ–Ω–∏—è
    if user_id in USER_STATES and message.text:
        examples = USER_STATES[user_id]["examples"]
        answers = re.findall(r'(\d+)\)\s*([\d\.\-]+)', message.text)
        response_text = "–†–µ–∑—É–ª—å—Ç–∞—Ç—ã:\n"

        for num, user_answer in answers:
            num = int(num) - 1
            if num < len(examples):
                correct_answer = examples[num]["answer"]
                if user_answer == correct_answer:
                    response_text += f"{num + 1}) –ü—Ä–∞–≤–∏–ª—å–Ω–æ: {correct_answer}\n"
                else:
                    response_text += f"{num + 1}) –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ. –û—Ç–≤–µ—Ç: {correct_answer}\n"
                    explanation = await invoke_llm_api(
                        f"–û–±—ä—è—Å–Ω–∏ –∫—Ä–∞—Ç–∫–æ, –∫–∞–∫ —Ä–µ—à–∏—Ç—å: {examples[num]['example']}. –û—Ç–≤–µ—Ç: {correct_answer}"
                    )
                    response_text += f"–û–±—ä—è—Å–Ω–µ–Ω–∏–µ: {explanation}\n"
        
        del USER_STATES[user_id]
        await message.reply(response_text, reply_markup=keyboard)
        return

    # –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ–±—ã—á–Ω—ã—Ö –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö –≤—ã—Ä–∞–∂–µ–Ω–∏–π
    if not message.text or not MATH_REGEX.search(message.text):
        await message.reply(
            "–û—Ç–ø—Ä–∞–≤—å –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ –∏–ª–∏ –≤—ã–±–µ—Ä–∏ –¥–µ–π—Å—Ç–≤–∏–µ.",
            reply_markup=keyboard
        )
        return

    processing_message = await message.reply("–†–µ—à–∞—é –∑–∞–¥–∞—á—É...")
    response_text = await invoke_llm_api(message.text)
    await bot.delete_message(chat_id=processing_message.chat.id, message_id=processing_message.message_id)

    if response_text:
        for i in range(0, len(response_text), 4096):
            await message.reply(response_text[i:i+4096], reply_markup=keyboard)
    else:
        await message.reply("–ù–µ —É–¥–∞–ª–æ—Å—å —Ä–µ—à–∏—Ç—å –∑–∞–¥–∞—á—É.", reply_markup=keyboard)
–û–±—ä—è—Å–Ω–µ–Ω–∏–µ:
- –≠—Ç–æ—Ç –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç, –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤ —Ä–µ–∂–∏–º–µ –æ–±—É—á–µ–Ω–∏—è:
  - –ï—Å–ª–∏ –¥–∞, –æ–Ω –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –æ—Ç–≤–µ—Ç—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ –¥–∞–µ—Ç –ø–æ—è—Å–Ω–µ–Ω–∏—è –∫ –æ—à–∏–±–∫–∞–º.
- –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–ø—Ä–∞–≤–∏–ª —Ç–µ–∫—Å—Ç–æ–≤–æ–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ, –±–æ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –µ–≥–æ –≤ API –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ä–µ—à–µ–Ω–∏–µ.

### –®–∞–≥ 17: –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞
–î–æ–±–∞–≤–∏–º —Ñ—É–Ω–∫—Ü–∏—é –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –±–æ—Ç–∞:
async def main():
    """–ó–∞–ø—É—Å–∫–∞–µ—Ç –±–æ—Ç–∞."""
    if not TELEGRAM_BOT_TOKEN:
        logging.error("Telegram bot token not found.")
        return
    await dp.start_polling(bot)

if __name__ == '__main__':
    asyncio.run(main())
–û–±—ä—è—Å–Ω–µ–Ω–∏–µ:
- main –∑–∞–ø—É—Å–∫–∞–µ—Ç –±–æ—Ç–∞ –∏ –Ω–∞—á–∏–Ω–∞–µ—Ç –ø—Ä–∏–Ω–∏–º–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è.
- asyncio.run(main()) ‚Äî —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –¥–ª—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è.

---

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞ API –∏ —Ç–æ–∫–µ–Ω–æ–≤

1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ .env –∑–∞–ø–æ–ª–Ω–µ–Ω –ø—Ä–∞–≤–∏–ª—å–Ω–æ:
   
   TELEGRAM_BOT_TOKEN=–≤–∞—à_—Ç–æ–∫–µ–Ω_–æ—Ç_BotFather
   OPENROUTER_API_KEY=–≤–∞—à_–∫–ª—é—á_–æ—Ç_OpenRouter
   REFERER_URL=http://localhost
   TITLE_NAME=Math Telegram Bot
   
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–±–æ—Ç—É API OpenRouter. –í—ã –º–æ–∂–µ—Ç–µ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å —á–µ—Ä–µ–∑ —Ç–µ—Ä–º–∏–Ω–∞–ª:
      curl -X POST https://openrouter.ai/api/v1/chat/completions \
   -H "Authorization: Bearer –≤–∞—à_–∫–ª—é—á_–æ—Ç_OpenRouter" \
   -H "Content-Type: application/json" \
   -d '{"model": "qwen/qwen-2-vl-7b-instruct", "messages": [{"role": "user", "content": "2+2"}]}'
   
   –ï—Å–ª–∏ –≤—ã –≤–∏–¥–∏—Ç–µ –æ—Ç–≤–µ—Ç —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–º 4, API —Ä–∞–±–æ—Ç–∞–µ—Ç.

---

## –ó–∞–ø—É—Å–∫ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –±–æ—Ç–∞

1. –ê–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ, –µ—Å–ª–∏ –µ—â–µ –Ω–µ —Å–¥–µ–ª–∞–ª–∏:
      venv\Scripts\activate  # –ù–∞ Windows
   source venv/bin/activate  # –ù–∞ macOS/Linux
   
2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞:
      python math.py
   
3. –û—Ç–∫—Ä–æ–π—Ç–µ Telegram, –Ω–∞–π–¥–∏—Ç–µ —Å–≤–æ–µ–≥–æ –±–æ—Ç–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, @MyMathBot123Bot) –∏ –æ—Ç–ø—Ä–∞–≤—å—Ç–µ /start.
4. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ:
   - –û—Ç–ø—Ä–∞–≤–∏—Ç—å –≤—ã—Ä–∞–∂–µ–Ω–∏–µ, –Ω–∞–ø—Ä–∏–º–µ—Ä, 2x = 4.
   - –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Ñ–æ—Ç–æ —Å –∑–∞–¥–∞—á–µ–π.
   - –ù–∞–∂–∞—Ç—å "–û–±—É—á–µ–Ω–∏–µ", –≤—ã–±—Ä–∞—Ç—å —Ç–µ–º—É –∏ —Ä–µ—à–∏—Ç—å 3 –ø—Ä–∏–º–µ—Ä–∞.

---

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏ —Å—Ö–µ–º—ã

### –°—Ö–µ–º–∞ 1: –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ MathBot
–ù–∏–∂–µ –ø—Ä–∏–≤–µ–¥–µ–Ω –∫–æ–¥ –¥–ª—è —Å—Ö–µ–º—ã –≤ —Ñ–æ—Ä–º–∞—Ç–µ XML, –∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–Ω–æ –≤—Å—Ç–∞–≤–∏—Ç—å –≤ [draw.io](https://app.diagrams.net/) –¥–ª—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏. –°—Ö–µ–º–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç, –∫–∞–∫ –¥–∞–Ω–Ω—ã–µ –ø—Ä–æ—Ö–æ–¥—è—Ç —á–µ—Ä–µ–∑ —Å–∏—Å—Ç–µ–º—É.

<mxfile host="app.diagrams.net" modified="2025-05-19T22:21:00+02:00" agent="5.0 (Windows)">
  <diagram id="1" name="–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ MathBot">
    <mxGraphModel dx="1000" dy="600" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="850" pageHeight="1100">
      <root>
        <mxCell id="0"/>
        <mxCell id="1" parent="0"/>
        <mxCell id="2" value="–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="50" y="50" width="100" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="3" value="Telegram –ö–ª–∏–µ–Ω—Ç" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="200" y="50" width="100" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="4" value="MathBot (Python)" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="350" y="50" width="100" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="5" value="OpenRouter API (Qwen2.5-VL)" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="500" y="50" width="150" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="6" value="–û—Ç–≤–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="700" y="50" width="100" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="7" value="–û—Ç–ø—Ä–∞–≤–∫–∞ –∑–∞–ø—Ä–æ—Å–∞" style="endArrow=classic;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="2" target="3">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="100" y="80" as="sourcePoint"/>
            <mxPoint x="200" y="80" as="targetPoint"/>
          </mxGeometry>
        </mxCell>
        <mxCell id="8" value="–ü–µ—Ä–µ–¥–∞—á–∞ –¥–∞–Ω–Ω—ã—Ö" style="endArrow=classic;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="3" target="4">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="250" y="80" as="sourcePoint"/>
            <mxPoint x="350" y="80" as="targetPoint"/>
          </mxGeometry>
        </mxCell>
        <mxCell id="9" value="–ó–∞–ø—Ä–æ—Å –∫ API" style="endArrow=classic;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="4" target="5">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="400" y="80" as="sourcePoint"/>
            <mxPoint x="500" y="80" as="targetPoint"/>
          </mxGeometry>
        </mxCell>
        <mxCell id="10" value="–ü–æ–ª—É—á–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç–∞" style="endArrow=classic;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="5" target="4">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="550" y="80" as="sourcePoint"/>
            <mxPoint x="450" y="80" as="targetPoint"/>
          </mxGeometry>
        </mxCell>
        <mxCell id="11" value="–ü–µ—Ä–µ–¥–∞—á–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞" style="endArrow=classic;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="4" target="3">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="400" y="80" as="sourcePoint"/>
            <mxPoint x="300" y="80" as="targetPoint"/>
          </mxGeometry>
        </mxCell>
        <mxCell id="12" value="–ü–æ–∫–∞–∑ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞" style="endArrow=classic;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="3" target="6">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="250" y="80" as="sourcePoint"/>
            <mxPoint x="350" y="80" as="targetPoint"/>
          </mxGeometry>
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>

–ü–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —Å—Ö–µ–º—ã:
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: –ß–µ–ª–æ–≤–µ–∫, –∫–æ—Ç–æ—Ä—ã–π –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∑–∞–ø—Ä–æ—Å (–Ω–∞–ø—Ä–∏–º–µ—Ä, —É—Ä–∞–≤–Ω–µ–Ω–∏–µ –∏–ª–∏ —Ñ–æ—Ç–æ) —á–µ—Ä–µ–∑ Telegram.
- Telegram –ö–ª–∏–µ–Ω—Ç: –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ Telegram –Ω–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
- MathBot (Python): –ù–∞—à –±–æ—Ç, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –∑–∞–ø—Ä–æ—Å—ã, –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∏—Ö –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –≤ API.
- OpenRouter API (Qwen2.5-VL): –°–µ—Ä–≤–µ—Ä —Å –Ω–µ–π—Ä–æ–Ω–Ω–æ–π —Å–µ—Ç—å—é, –∫–æ—Ç–æ—Ä—ã–π —Ä–µ—à–∞–µ—Ç –∑–∞–¥–∞—á—É.
- –û—Ç–≤–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é: –ò—Ç–æ–≥–æ–≤—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç, –∫–æ—Ç–æ—Ä—ã–π –±–æ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –æ–±—Ä–∞—Ç–Ω–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é —á–µ—Ä–µ–∑ Telegram.

–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç:
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –∏–ª–∏ —Ñ–æ—Ç–æ –≤ Telegram.
2. Telegram –ø–µ—Ä–µ–¥–∞–µ—Ç —ç—Ç–æ —Å–æ–æ–±—â–µ–Ω–∏–µ –±–æ—Ç—É.
3. –ë–æ—Ç –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∑–∞–ø—Ä–æ—Å –∫ OpenRouter API.
4. API –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ä–µ—à–µ–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ –±–æ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –æ–±—Ä–∞—Ç–Ω–æ —á–µ—Ä–µ–∑ Telegram –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é.

### –°—Ö–µ–º–∞ 2: –ü—Ä–æ—Ü–µ—Å—Å –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞–¥–∞—á–∏
–≠—Ç–∞ —Å—Ö–µ–º–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç, –∫–∞–∫ –±–æ—Ç –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∑–∞–ø—Ä–æ—Å –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

<mxfile host="app.diagrams.net" modified="2025-05-19T22:21:00+02:00" agent="5.0 (Windows)">
  <diagram id="2" name="–ü—Ä–æ—Ü–µ—Å—Å –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞–¥–∞—á–∏">
    <mxGraphModel dx="1000" dy="600" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="850" pageHeight="1100">
      <root>
        <mxCell id="0"/>
        <mxCell id="1" parent="0"/>
        <mxCell id="2" value="–ü–æ–ª—É—á–µ–Ω–∏–µ –≤–≤–æ–¥–∞ (—Ç–µ–∫—Å—Ç/—Ñ–æ—Ç–æ)" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="50" y="50" width="150" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="3" value="–°–æ–æ–±—â–µ–Ω–∏–µ '–û–±—Ä–∞–±–∞—Ç—ã–≤–∞—é...'" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="250" y="50" width="150" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="4" value="–û—Ç–ø—Ä–∞–≤–∫–∞ –≤ OpenRouter API" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="450" y="50" width="150" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="5" value="–ü–æ–ª—É—á–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç–∞ –æ—Ç API" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="650" y="50" width="150" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="6" value="–û—Ç–ø—Ä–∞–≤–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="850" y="50" width="150" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="7" value="–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–ø—Ä–∞–≤–∏–ª –∑–∞–¥–∞—á—É" style="endArrow=classic;html=1;" edge="1" parent="1" source="2" target="3">
          <mxGeometry width="50" height="50" relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="8" value="–ü–æ–∫–∞–∑ —Å–æ–æ–±—â–µ–Ω–∏—è" style="endArrow=classic;html=1;" edge="1" parent="1" source="3" target="4">
          <mxGeometry width="50" height="50" relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="9" value="–ó–∞–ø—Ä–æ—Å –∫ API" style="endArrow=classic;html=1;" edge="1" parent="1" source="4" target="5">
          <mxGeometry width="50" height="50" relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="10" value="–ü–æ–ª—É—á–µ–Ω–∏–µ —Ä–µ—à–µ–Ω–∏—è" style="endArrow=classic;html=1;" edge="1" parent="1" source="5" target="6">
          <mxGeometry width="50" height="50" relative="1" as="geometry"/>
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>

–ü–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —Å—Ö–µ–º—ã:
- –ü–æ–ª—É—á–µ–Ω–∏–µ –≤–≤–æ–¥–∞ (—Ç–µ–∫—Å—Ç/—Ñ–æ—Ç–æ): –ë–æ—Ç –ø—Ä–∏–Ω–∏–º–∞–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è ‚Äî —ç—Ç–æ –º–æ–∂–µ—Ç –±—ã—Ç—å —Ç–µ–∫—Å—Ç (–Ω–∞–ø—Ä–∏–º–µ—Ä, 2x = 4) –∏–ª–∏ —Ñ–æ—Ç–æ.
- –°–æ–æ–±—â–µ–Ω–∏–µ '–û–±—Ä–∞–±–∞—Ç—ã–≤–∞—é...': –ë–æ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é —Å–æ–æ–±—â–µ–Ω–∏–µ "–û–±—Ä–∞–±–∞—Ç—ã–≤–∞—é —Ñ–æ—Ç–æ..." –∏–ª–∏ "–†–µ—à–∞—é –∑–∞–¥–∞—á—É...", —á—Ç–æ–±—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–Ω–∞–ª, —á—Ç–æ –±–æ—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç.
- –û—Ç–ø—Ä–∞–≤–∫–∞ –≤ OpenRouter API: –ë–æ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∑–∞–ø—Ä–æ—Å –∫ API —Å —Ç–µ–∫—Å—Ç–æ–º –∏–ª–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º.
- –ü–æ–ª—É—á–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç–∞ –æ—Ç API: API –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ä–µ—à–µ–Ω–∏–µ –≤ —Ñ–æ—Ä–º–∞—Ç–µ "–û—Ç–≤–µ—Ç: [—á–∏—Å–ª–æ]\n–†–µ—à–µ–Ω–∏–µ: [–æ–±—ä—è—Å–Ω–µ–Ω–∏–µ]".
- –û—Ç–ø—Ä–∞–≤–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é: –ë–æ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Ä–µ—à–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é —á–µ—Ä–µ–∑ Telegram.

---

## –ß—Ç–æ –¥–µ–ª–∞—Ç—å, –µ—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

1. –ë–æ—Ç –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è:
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, –ø—Ä–∞–≤–∏–ª—å–Ω–æ –ª–∏ —É–∫–∞–∑–∞–Ω—ã —Ç–æ–∫–µ–Ω—ã –≤ .env.
   - –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–æ ((venv) –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ).
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –ª–∏ –≤—Å–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ (pip install aiogram aiohttp python-dotenv).
2. API –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ—à–∏–±–∫—É:
   - –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤–∞—à –∫–ª—é—á OpenRouter API –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª–µ–Ω. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å —á–µ—Ä–µ–∑ curl (—Å–º. —Ä–∞–∑–¥–µ–ª "–ù–∞—Å—Ç—Ä–æ–π–∫–∞ API –∏ —Ç–æ–∫–µ–Ω–æ–≤").
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, –µ—Å—Ç—å –ª–∏ —É –≤–∞—Å –¥–æ—Å—Ç—É–ø –∫ –º–æ–¥–µ–ª–∏ Qwen2.5-VL 7B Instruct (–Ω–∞ OpenRouter –º–æ–∂–µ—Ç –±—ã—Ç—å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –ø–æ —Ç–∞—Ä–∏—Ñ—É).
3. –§–æ—Ç–æ –Ω–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è:
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, –ø—Ä–∞–≤–∏–ª—å–Ω–æ –ª–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç —Ñ—É–Ω–∫—Ü–∏—è download_image. –í–æ–∑–º–æ–∂–Ω–æ, –ø—Ä–æ–±–ª–µ–º–∞ —Å —Ç–æ–∫–µ–Ω–æ–º Telegram.
   - –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ñ–æ—Ç–æ —Å–æ–¥–µ—Ä–∂–∏—Ç —á–∏—Ç–∞–µ–º–æ–µ –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ.

---

## –ö–∞–∫ —É–ª—É—á—à–∏—Ç—å –±–æ—Ç–∞

- –î–æ–±–∞–≤—å—Ç–µ –Ω–æ–≤—ã–µ —Ç–µ–º—ã –¥–ª—è –æ–±—É—á–µ–Ω–∏—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, "–¢—Ä–∏–≥–æ–Ω–æ–º–µ—Ç—Ä–∏—è" –∏–ª–∏ "–ü—Ä–æ–∏–∑–≤–æ–¥–Ω—ã–µ").
- –í–∫–ª—é—á–∏—Ç–µ –ø–æ–¥–¥–µ—Ä–∂–∫—É –≥–æ–ª–æ—Å–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π –¥–ª—è –≤–≤–æ–¥–∞ –∑–∞–¥–∞—á.
- –î–æ–±–∞–≤—å—Ç–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É: —Å–∫–æ–ª—å–∫–æ –∑–∞–¥–∞—á –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Ä–µ—à–∏–ª –ø—Ä–∞–≤–∏–ª—å–Ω–æ.
- –°–¥–µ–ª–∞–π—Ç–µ –±–æ—Ç–∞ –º—É–ª—å—Ç–∏—è–∑—ã—á–Ω—ã–º, –¥–æ–±–∞–≤–∏–≤ –ø–æ–¥–¥–µ—Ä–∂–∫—É –∞–Ω–≥–ª–∏–π—Å–∫–æ–≥–æ —è–∑—ã–∫–∞.

---

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º! –í—ã —Å–æ–∑–¥–∞–ª–∏ MathBot ‚Äî Telegram-–±–æ—Ç–∞, –∫–æ—Ç–æ—Ä—ã–π —Ä–µ—à–∞–µ—Ç –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –∑–∞–¥–∞—á–∏ —Å –ø–æ–º–æ—â—å—é –Ω–µ–π—Ä–æ–Ω–Ω–æ–π —Å–µ—Ç–∏ Qwen2.5-VL 7B Instruct. –≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç ‚Äî –æ—Ç–ª–∏—á–Ω—ã–π —Å—Ç–∞—Ä—Ç –¥–ª—è –∏–∑—É—á–µ–Ω–∏—è Python, —Ä–∞–±–æ—Ç—ã —Å API –∏ —Å–æ–∑–¥–∞–Ω–∏—è —á–∞—Ç-–±–æ—Ç–æ–≤. –¢–µ–ø–µ—Ä—å –≤—ã –º–æ–∂–µ—Ç–µ —É–ª—É—á—à–∞—Ç—å –±–æ—Ç–∞, –¥–æ–±–∞–≤–ª—è—è –Ω–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏, –∏ –¥–µ–ª–∏—Ç—å—Å—è –∏–º —Å –¥—Ä—É–∑—å—è–º–∏. –£–¥–∞—á–∏ –≤ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–∏! üöÄ
